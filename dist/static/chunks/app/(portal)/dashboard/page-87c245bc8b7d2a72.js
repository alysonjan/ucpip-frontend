(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1100],{33451:function(e,t,a){Promise.resolve().then(a.bind(a,55276))},55276:function(e,t,a){"use strict";a.r(t);var l=a(1443),s=a(97679),r=a(30476),n=a(17954),i=a(72683),o=a(89147),d=a(88060),c=a(4483),u=a(86219),h=a(54885),x=a(30120),m=a(81760),f=a(50045),p=a.n(f);let g=async()=>{let e=await fetch("".concat("https://ucpip-backend-production.up.railway.app","/api/dashboard"),{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch dashboard data");return e.json()};t.default=()=>{var e,t,a,f,v,j;let[w,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await g();b(e)}catch(e){console.error("Error fetching dashboard data:",e)}})()},[]);let y=null==w?void 0:null===(e=w.patient_per_month)||void 0===e?void 0:e.map(e=>({name:e.month.charAt(0).toUpperCase()+e.month.slice(1).toLowerCase(),value:e.total})),N=null==w?void 0:null===(t=w.patient_per_day_of_week)||void 0===t?void 0:t.map(e=>({name:e.day.charAt(0).toUpperCase()+e.day.slice(1).toLowerCase(),value:e.total})),C=null==w?void 0:null===(a=w.top10_common_reason)||void 0===a?void 0:a.map(e=>({name:e.reason.charAt(0).toUpperCase()+e.reason.slice(1).toLowerCase(),value:e.total})),_=null==w?void 0:null===(f=w.top10_days_with_most_patient)||void 0===f?void 0:f.map(e=>({name:e.date.charAt(0).toUpperCase()+e.date.slice(1).toLowerCase(),value:e.total})),k=(null==N?void 0:N.reduce((e,t)=>e+t.value,0))||0,O=(null==N?void 0:N.length)?Math.round(k/N.length):0,A=(null==N?void 0:N.reduce((e,t)=>e+t.value,0))||0,E=null==w?void 0:null===(v=w.consultation_per_monthly)||void 0===v?void 0:v.map(e=>({name:e.month.charAt(0).toUpperCase()+e.month.slice(1).toLowerCase(),value:e.total})),K=null==w?void 0:null===(j=w.consultation_per_day_week)||void 0===j?void 0:j.map(e=>({name:e.day.charAt(0).toUpperCase()+e.day.slice(1).toLowerCase(),value:e.total})),D=(null==y?void 0:y.reduce((e,t)=>e+t.value,0))||0,F=(null==y?void 0:y.length)?Math.round(D/y.length):0,[R,P]=(0,n.useState)(new Date().getFullYear().toString()),[U,Y]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=new Date().getFullYear();Y(Array.from({length:11},(t,a)=>e-a))},[]);let B=async()=>{try{let t=await fetch("".concat("https://ucpip-backend-production.up.railway.app","/api/yearly-report"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({date:R})});if(t.ok){var e;let a=await t.blob(),l=window.URL.createObjectURL(a),s="generated_".concat(R,".pdf"),r=document.createElement("a");r.href=l,r.setAttribute("download",s),document.body.appendChild(r),r.click(),null===(e=r.parentNode)||void 0===e||e.removeChild(r),p().fire({icon:"success",title:"Success!",text:"PDF downloaded successfully!",timer:3e3,showConfirmButton:!1})}else p().fire({icon:"error",title:"Error!",text:"Failed to generate report",confirmButtonText:"OK"})}catch(e){alert("Failed to connect to the server")}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("section",{className:"bg-gray-300 w-full flex-1 p-4 h-full overflow-y-auto space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("select",{value:R,onChange:e=>P(e.target.value),className:"w-32 px-3 py-2 border rounded-md shadow-sm text-gray-700 focus:ring focus:ring-indigo-300 focus:border-indigo-500",children:U.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsxs)(s.z,{onClick:B,className:"flex items-center gap-2  text-white font-semibold py-2 px-4 rounded-lg",children:["Generate Yearly Report",(0,l.jsx)(m.Z,{className:"ml-1"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)(r.Zb,{className:"bg-[#800000] text-white shadow-lg rounded-lg",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-4xl font-semibold",children:"Overall Visits"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-6xl ",children:(null==w?void 0:w.overall_visit)||0})})]}),(0,l.jsxs)(r.Zb,{className:"bg-[#800000] text-white shadow-lg rounded-lg",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-4xl font-semibold",children:"Overall Patients"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-6xl ",children:(null==w?void 0:w.overall_patient)||0})})]}),(0,l.jsxs)(r.Zb,{className:"bg-[#800000] text-white shadow-lg rounded-lg",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-4xl font-semibold",children:"Average Visits per Day"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-6xl",children:O})})]}),(0,l.jsxs)(r.Zb,{className:"bg-[#800000] text-white shadow-lg rounded-lg",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-4xl font-semibold",children:"Average Visits Per Week"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-6xl",children:Math.round(A/7)})})]}),(0,l.jsxs)(r.Zb,{className:"bg-[#800000] text-white shadow-lg rounded-lg",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-4xl font-semibold",children:"Average Visits per Month"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-6xl",children:F})})]})]}),(0,l.jsxs)("div",{className:"grid grid-flow-col grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"inline-flex flex-col bg-white rounded shadow-md shadow-slate-600 p-2 gap-2",children:[(0,l.jsx)("h4",{className:"pl-2 text-xl font-bold",children:"Number of Visits Per Month"}),(0,l.jsx)(i.h,{width:"100%",height:300,children:(0,l.jsxs)(o.v,{data:E,className:"text-sm",children:[(0,l.jsx)(d.K,{dataKey:"name"}),(0,l.jsx)(c.B,{}),(0,l.jsx)(u.u,{}),(0,l.jsx)(h.D,{}),(0,l.jsx)(x.$,{dataKey:"value",fill:"#A9E3AE"})]})})]}),(0,l.jsxs)("div",{className:"inline-flex flex-col bg-white rounded shadow-md shadow-slate-600 p-2 gap-2",children:[(0,l.jsx)("h4",{className:"pl-2 text-xl font-bold",children:"Number of Visits Per Day"}),(0,l.jsx)(i.h,{width:"100%",height:300,children:(0,l.jsxs)(o.v,{data:K,className:"text-sm",children:[(0,l.jsx)(d.K,{dataKey:"name"}),(0,l.jsx)(c.B,{}),(0,l.jsx)(u.u,{}),(0,l.jsx)(h.D,{}),(0,l.jsx)(x.$,{dataKey:"value",fill:"#F17878"})]})})]})]}),(0,l.jsxs)("div",{className:"grid grid-flow-col grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"inline-flex flex-col bg-white rounded shadow-md shadow-slate-600 p-2 gap-2",children:[(0,l.jsx)("h4",{className:"pl-2 text-xl font-bold",children:"Top 10 Patient Chief Complaint"}),(0,l.jsx)(i.h,{width:"100%",height:300,children:(0,l.jsxs)(o.v,{data:C,className:"text-sm",children:[(0,l.jsx)(d.K,{dataKey:"name"}),(0,l.jsx)(c.B,{}),(0,l.jsx)(u.u,{}),(0,l.jsx)(h.D,{}),(0,l.jsx)(x.$,{dataKey:"value",fill:"#F6E788"})]})})]}),(0,l.jsxs)("div",{className:"inline-flex flex-col bg-white rounded shadow-md shadow-slate-600 p-2 gap-2",children:[(0,l.jsx)("h4",{className:"pl-2 text-xl font-bold",children:"Top 10 Days With Most Patient"}),(0,l.jsx)(i.h,{width:"100%",height:300,children:(0,l.jsxs)(o.v,{data:_,className:"text-sm",children:[(0,l.jsx)(d.K,{dataKey:"name"}),(0,l.jsx)(c.B,{}),(0,l.jsx)(u.u,{}),(0,l.jsx)(h.D,{}),(0,l.jsx)(x.$,{dataKey:"value",fill:"#17BDF6"})]})})]})]})]})})}},97679:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var l=a(1443),s=a(17954),r=a(73918),n=a(60707),i=a(17295);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-sm text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-sm px-3",lg:"h-11 rounded-sm px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},30476:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var l=a(1443),s=a(17954),r=a(17295);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("rounded-md border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},17295:function(e,t,a){"use strict";a.d(t,{cn:function(){return r},k:function(){return n}});var l=a(42784),s=a(26215);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,l.W)(t))}function n(e){return e<18.5?"Underweight":e>=18.5&&e<25?"Normal weight":e>=25&&e<30?"Overweight":e>=30&&e<35?"Obesity Class I":e>=35&&e<40?"Obesity Class II":"Obesity Class III"}}},function(e){e.O(0,[7640,7333,7063,9878,323,1744],function(){return e(e.s=33451)}),_N_E=e.O()}]);