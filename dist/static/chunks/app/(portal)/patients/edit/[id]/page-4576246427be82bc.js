(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{24699:function(e,l,s){Promise.resolve().then(s.bind(s,99127))},99127:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return I}});var n=s(1443),a=s(52021),r=s(26668),t=s(97679),c=s(56345),i=s(45250),o=s(52733),x=s(17295),d=s(25843),h=s(57236),m=s(17954),j=s(77973),u=s(30476),p=s(50045),N=s.n(p),f=s(56079),g=s(2046),v=s(60825),w=s(25395);let y=async e=>{try{let l=await fetch("".concat("https://ucpip-backend-production.up.railway.app","/api/patient/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!l.ok)throw Error("HTTP error! Status: ".concat(l.status));let s=await l.json();return Array.isArray(s)?s[0]:s}catch(e){throw console.error("Error fetching patient data:",e),e}};var b=e=>{let{id:l}=e,[s,a]=(0,m.useState)([]),[r,p]=(0,m.useState)(null),b=(0,h.cI)({resolver:(0,d.F)(j.Q),defaultValues:{first_name:"",last_name:"",sex:"male",contact:"",email:"",address:"",date_of_birth:"",student_id:"",department:"",height:"",weight:"",bmi:"",bmi_category:"",existing_medical_condition:"",maintenance_medication:"",allergies:"",vaccination_link:"",family_hx_of_illness:"",smoking:"No",drinking:"No",health_insurance:"",patient_category:"Normal",blood_type:"A+",action:"edit"}}),{control:I,setValue:_,watch:C,reset:k}=b,z=C("existing_medical_condition"),G=C("maintenance_medication"),J=C("family_hx_of_illness"),W=C("height"),X=C("weight");(0,m.useEffect)(()=>{let e=parseFloat(null!=W?W:"0")/100,l=parseFloat(null!=X?X:"0");if(e>0&&l>0){let s=parseFloat((l/(e*e)).toFixed(2)),n=(0,x.k)(s);_("bmi",s.toFixed(2)),_("bmi_category",n)}else _("bmi",""),_("bmi_category","")},[W,X,_]),(0,m.useEffect)(()=>{(async e=>{try{let l=await y(e);l&&(p(l),k(l))}catch(e){console.error("Error fetching patient:",e)}})(l)},[l,k]),(0,m.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://ucpip-backend-production.up.railway.app","/api/departments"),{method:"GET",credentials:"include"}),l=await e.json();a(l)}catch(e){console.error("Failed to fetch departments:",e)}})()},[]);let A=async e=>{let l={action:"edit",...e};try{let e=await fetch("".concat("https://ucpip-backend-production.up.railway.app","/api/patient/save"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),s=await e.json();e.ok?N().fire({icon:"success",title:"Success!",text:"Patient data has been updated successfully.",confirmButtonText:"OK"}):(console.error(s.message||"Update failed"),N().fire({icon:"error",title:"Error!",text:s.message||"Update failed",confirmButtonText:"OK"}))}catch(e){alert("Failed to connect to the server")}},E=(e,l,s)=>""!==e.trim()||""!==l.trim()||""!==s.trim()?{category:"Alert",color:"text-red-500"}:{category:"Normal",color:"text-green-500"};return(0,m.useEffect)(()=>{let{category:e,color:l}=E(null!=z?z:"",null!=G?G:"",null!=J?J:"");_("patient_category",e)},[z,G,J,_]),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(u.Zb,{className:"col-span-7 shadow-md p-6 bg-gray-200 ",children:(0,n.jsx)(c.l0,{...b,children:(0,n.jsxs)("form",{onSubmit:b.handleSubmit(A),className:"space-y-4 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,n.jsx)(c.Wi,{control:b.control,name:"student_id",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Student ID"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px] m-2",placeholder:"Student ID"})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"first_name",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Firstname"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px] m-2",placeholder:"Firstname"})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"last_name",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Lastname"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px] m-2",placeholder:"Lastname"})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"sex",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{className:"w-[150px] m-2",children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Sex"}),(0,n.jsx)(c.NI,{children:(0,n.jsxs)(o.Ph,{value:l.value||"",onValueChange:e=>l.onChange(e),children:[(0,n.jsx)(o.i4,{children:(0,n.jsx)(o.ki,{placeholder:"Sex"})}),(0,n.jsx)(o.Bw,{children:j.Q.shape.sex.options.map(e=>(0,n.jsx)(o.Ql,{value:e,children:e},e.toLowerCase()))})]})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"contact",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Contact No."}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px]  m-2",placeholder:"Contact No."})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"email",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Email"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px]  m-2",placeholder:"Email"})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"address",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Home Address"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...l,className:"w-[250px]  m-2",placeholder:"Home Address"})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"date_of_birth",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{className:"w-[150px]",children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Birthdate"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)("input",{type:"date",...l,id:l.name,className:(0,x.cn)("w-full pl-3 text-left font-normal",!l.value&&"text-muted-foreground"),onChange:e=>{l.onChange(e.target.value)}})}),(0,n.jsx)(c.zG,{})]})}})]}),(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Department"}),(0,n.jsx)("div",{className:"flex flex-wrap w-full",children:(0,n.jsx)(c.Wi,{control:b.control,name:"department",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{className:"w-[250px] m-2",children:[(0,n.jsx)(c.NI,{children:(0,n.jsxs)(o.Ph,{value:l.value||"",onValueChange:e=>l.onChange(e),children:[(0,n.jsx)(o.i4,{children:(0,n.jsx)(o.ki,{placeholder:"Select Department"})}),(0,n.jsx)(o.Bw,{children:s.map(e=>(0,n.jsx)(o.Ql,{value:e.id.toString(),children:e.name},e.id))})]})}),(0,n.jsx)(c.zG,{})]})}})}),(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Statistics"}),(0,n.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,n.jsx)(c.Wi,{control:I,name:"height",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Height (cm)"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,type:"number",className:"w-[250px] m-2",placeholder:"Height (cm)",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:I,name:"weight",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Weight (kg)"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,type:"number",className:"w-[250px] m-2",placeholder:"Weight (kg)",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:I,name:"bmi",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"BMI"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,readOnly:!0,className:"w-[250px] m-2",placeholder:"BMI",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Wi,{control:I,name:"bmi_category",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(f.pn,{children:(0,n.jsxs)(f.u,{children:[(0,n.jsx)(f.aJ,{asChild:!0,children:(0,n.jsxs)(c.lX,{className:"m-2 cursor-pointer relative group flex items-center space-x-2",children:[(0,n.jsx)("span",{children:"BMI Category"}),(0,n.jsx)(g.Z,{className:"text-gray-500 group-hover:text-blue-500 transition-colors duration-300",size:18}),(0,n.jsx)("span",{className:"absolute left-0 -bottom-1 w-1/2 h-0.5 bg-blue-500 scale-x-0 group-hover:scale-x-100 transition-transform duration-300"})]})}),(0,n.jsxs)(f._v,{children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"BMI Chart:"})}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{className:"text-red-500",children:"Less than 18.5: Underweight"}),(0,n.jsx)("li",{className:"text-green-500",children:"18.5 to 24.9: Normal weight"}),(0,n.jsx)("li",{className:"text-yellow-500",children:"25.0 to 29.9: Overweight"}),(0,n.jsx)("li",{className:"text-orange-500",children:"30.0 to 34.9: Obesity (Class 1)"}),(0,n.jsx)("li",{className:"text-orange-700",children:"35.0 to 39.9: Obesity (Class 2)"}),(0,n.jsx)("li",{className:"text-red-700",children:"40.0 and above: Obesity (Class 3)"})]})]})]})}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"BMI Category",value:null!==(l=s.value)&&void 0!==l?l:"",readOnly:!0})}),(0,n.jsx)(c.zG,{})]})}})})]}),(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Health Information"}),(0,n.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,n.jsx)(c.Wi,{control:b.control,name:"existing_medical_condition",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Existing Medical Condition"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"Existing Medical Condition",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"maintenance_medication",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Maintenance Medication"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"Maintenance Medication",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"allergies",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Allergies"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"Allergies",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"vaccination_link",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Vaccination"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(v.g,{...s,className:"w-[250px] h-[100px] m-2",placeholder:"Vaccination",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"family_hx_of_illness",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Family Hx of illness"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"Family Hx of illness",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"smoking",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Smoking"}),(0,n.jsx)(c.NI,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-4 m-2",children:[(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"radio",value:"Yes",checked:"Yes"===l.value,onChange:()=>l.onChange("Yes"),className:"checkbox"}),(0,n.jsx)("span",{children:"Yes"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"radio",value:"No",checked:"No"===l.value,onChange:()=>l.onChange("No"),className:"checkbox"}),(0,n.jsx)("span",{children:"No"})]})]})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"drinking",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Drinking"}),(0,n.jsx)(c.NI,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-4 m-2",children:[(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"radio",value:"Yes",checked:"Yes"===l.value,onChange:()=>l.onChange("Yes"),className:"checkbox"}),(0,n.jsx)("span",{children:"Yes"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"radio",value:"No",checked:"No"===l.value,onChange:()=>l.onChange("No"),className:"checkbox"}),(0,n.jsx)("span",{children:"No"})]})]})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"health_insurance",render:e=>{var l;let{field:s}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Health Insurance"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(i.I,{...s,className:"w-[250px] m-2",placeholder:"Health Insurance",value:null!==(l=s.value)&&void 0!==l?l:""})}),(0,n.jsx)(c.zG,{})]})}})]}),(0,n.jsx)("h3",{className:"text-xl font-semibold",children:"Health Status"}),(0,n.jsxs)("div",{className:"flex flex-wrap w-full",children:[(0,n.jsx)(c.Wi,{control:I,name:"patient_category",render:e=>{let{field:l}=e,{category:s,color:a}=E(null!=z?z:"",null!=G?G:"",null!=J?J:"");return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"Patient Category"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)("div",{className:(0,x.cn)("font-bold",a),children:s})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:b.control,name:"blood_type",render:e=>{let{field:l}=e;return(0,n.jsxs)(c.xJ,{className:"w-[250px] m-2",children:[(0,n.jsx)(c.lX,{className:"m-2",children:"Blood Type"}),(0,n.jsx)(c.NI,{children:(0,n.jsxs)(o.Ph,{value:l.value||"",onValueChange:e=>l.onChange(e),children:[(0,n.jsx)(o.i4,{children:(0,n.jsx)(o.ki,{placeholder:"Select Blood Type"})}),(0,n.jsx)(o.Bw,{children:["A+","A-","B+","B-","O+","O-","AB+","AB-"].map(e=>(0,n.jsx)(o.Ql,{value:e,children:e},e))})]})}),(0,n.jsx)(c.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,n.jsx)(w.default,{href:"/patients",children:(0,n.jsx)(t.z,{children:"Back"})}),(0,n.jsx)(t.z,{className:"w-[200px]",type:"submit",children:"Save"})]})]})})}):(0,n.jsx)("div",{children:"Loading patient information..."})})},I=e=>{let{params:l}=e,s=l.id;return(0,n.jsxs)("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto",children:[(0,n.jsx)(a.aG,{children:(0,n.jsxs)(a.Jb,{children:[(0,n.jsx)(a.gN,{children:(0,n.jsx)(a.At,{href:"/",children:"Portal"})}),(0,n.jsx)(a.bg,{}),(0,n.jsx)(a.gN,{children:(0,n.jsxs)(r.DropdownMenu,{children:[(0,n.jsx)(r.DropdownMenuTrigger,{className:"flex items-center gap-1",children:(0,n.jsx)(a.D5,{className:"h-4 w-4"})}),(0,n.jsxs)(r.DropdownMenuContent,{align:"start",children:[(0,n.jsx)(r.DropdownMenuItem,{children:(0,n.jsx)(a.At,{className:"w-full",href:"/dashboard",children:"Dashboard"})}),(0,n.jsx)(r.DropdownMenuItem,{children:(0,n.jsx)(a.At,{className:"w-full",href:"/admissions",children:"Admissions"})}),(0,n.jsx)(r.DropdownMenuItem,{children:(0,n.jsx)(a.At,{className:"w-full",href:"/patients",children:"Patients"})}),(0,n.jsx)(r.DropdownMenuItem,{children:(0,n.jsx)(a.At,{className:"w-full",href:"/administration",children:"Administration"})})]})]})}),(0,n.jsx)(a.bg,{}),(0,n.jsx)(a.gN,{children:(0,n.jsx)(a.At,{href:"/patients",children:"Patients"})}),(0,n.jsx)(a.bg,{}),(0,n.jsx)(a.gN,{children:(0,n.jsx)(a.At,{children:"Edit"})})]})}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("h1",{className:"text-xl font-semibold mr-5",children:"Edit Patient"})}),(0,n.jsx)("div",{className:"bg-white rounded shadow-md  w-full ",children:"string"==typeof s&&(0,n.jsx)(b,{id:s})})]})}}},function(e){e.O(0,[7640,7333,8674,3859,5875,442,7705,6791,5395,6185,112,1775,9878,323,1744],function(){return e(e.s=24699)}),_N_E=e.O()}]);