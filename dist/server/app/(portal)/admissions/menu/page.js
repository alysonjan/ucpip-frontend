(()=>{var e={};e.id=6952,e.ids=[6952],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},65044:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var t=a(43739),n=a(65208),r=a(5313),l=a.n(r),i=a(54054),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let c=["",{children:["(portal)",{children:["admissions",{children:["menu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1427)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\admissions\\menu\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,14886)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\admissions\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,95985)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,74969)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\admissions\\menu\\page.tsx"],m="/(portal)/admissions/menu/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(portal)/admissions/menu/page",pathname:"/admissions/menu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93724:(e,s,a)=>{Promise.resolve().then(a.bind(a,67007))},9833:()=>{},67007:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(10439),n=a(21526),r=a(48449),l=a(93865),i=a(37049),o=a(59816),c=a(35280),d=a(28465),m=a(48424),x=a(72117);let u=x.z.object({vaccination_given:x.z.string().nonempty("Vaccination given is required"),dose_no:x.z.string().nonempty("Dose number is required"),purpose:x.z.string().nonempty("Purpose is required")});var p=a(3708);let h=({data:e,onContinue:s,setActiveTab:a})=>{let r=["health_concern","physical_exam","med_certificate","vaccination"],[x,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let s=[...e.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s));h(s.findIndex(e=>"vaccination"===e)+1>=s.length)},[e.services]);let f=(0,d.cI)({resolver:(0,c.F)(u),defaultValues:{vaccination_given:"",dose_no:"",purpose:""}}),j=async a=>{let t={consultation_service:"vaccination",...e,...a};if(0===(t.services||[]).length){console.error("No services selected");return}let n=[...t.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s)),l=n.findIndex(e=>"vaccination"===e)+1;if(l<n.length){let e=n[l];try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?console.log("success"):console.error(s.message||"Insert failed")}catch(e){alert("Failed to connect to the server")}s(`${e}_form`)}else{console.log("Final payload:",t);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?(m.Z.fire({icon:"success",title:"Success!",text:"Patient data has been added successfully.",confirmButtonText:"OK"}),window.location.reload()):(console.error(s.message||"Insert failed"),m.Z.fire({icon:"error",title:"Error!",text:s.message||"Insert failed",confirmButtonText:"OK"}))}catch(e){alert("Failed to connect to the server")}}},g=()=>{a("patient_info_form")};return t.jsx(o.l0,{...f,children:t.jsx("form",{onSubmit:f.handleSubmit(j),className:"space-y-4 flex flex-col w-full",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-10 p-16 bg-gray-100 rounded-lg shadow-md w-[800px] mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Vaccination Form"}),t.jsx(o.Wi,{control:f.control,name:"vaccination_given",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Vaccination Given ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter vaccination"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:f.control,name:"dose_no",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Dose No. ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Dose No."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:f.control,name:"purpose",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Purpose of Vaccination ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Explain here..."})}),t.jsx(o.zG,{})]})}),(0,t.jsxs)("div",{className:"flex justify-center",children:[t.jsx(i.z,{className:"w-[300px] m-2",type:"button",onClick:()=>g(),children:"Back"}),t.jsx(i.z,{className:"w-[300px] m-2",type:"submit",children:x?"Save":"Continue"})]})]})})})};var f=a(69224);let j=x.z.object({chief_complaint:x.z.string().nonempty("Chief Complaint is required"),working_diagnosis:x.z.string().optional(),signs_and_symptoms:x.z.string().optional(),allergies:x.z.string().optional(),case_type:x.z.enum(["trauma","medical"]),medication:x.z.string().optional(),quantity:x.z.string().optional(),past_medical_history:x.z.string().optional(),assessment:x.z.string().optional(),remarks:x.z.string().optional(),reason_for_consultation:x.z.string().optional()}),g=({data:e,onContinue:s,setActiveTab:a})=>{let[l,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/chief-complaints",{method:"GET",credentials:"include"}),s=await e.json();h(s)}catch(e){console.error("Failed to fetch Chief Complaint:",e)}finally{g(!1)}})();let s=[...e.services||[]].sort((e,s)=>y.indexOf(e)-y.indexOf(s));x(s.findIndex(e=>"health_concern"===e)+1>=s.length)},[e.services]);let y=["health_concern","physical_exam","med_certificate","vaccination"],b=(0,d.cI)({resolver:(0,c.F)(j),defaultValues:{chief_complaint:"",working_diagnosis:"",signs_and_symptoms:"",allergies:"",case_type:"trauma",medication:"",quantity:"",past_medical_history:"",assessment:"",remarks:"",reason_for_consultation:""}}),N=async a=>{let t={consultation_service:"health_concern",...e,...a};if(0===(t.services||[]).length){console.error("No services selected");return}let n=[...t.services||[]].sort((e,s)=>y.indexOf(e)-y.indexOf(s)),r=n.findIndex(e=>"health_concern"===e)+1;if(r<n.length){let e=n[r];try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?console.log("success"):console.error(s.message||"Insert failed")}catch(e){alert("Failed to connect to the server")}s(`${e}_form`)}else{console.log("Final payload:",t);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?(m.Z.fire({icon:"success",title:"Success!",text:"Patient data has been added successfully.",confirmButtonText:"OK"}),window.location.reload()):(console.error(s.message||"Insert failed"),m.Z.fire({icon:"error",title:"Error!",text:s.message||"Insert failed",confirmButtonText:"OK"}))}catch(e){alert("Failed to connect to the server")}}},v=()=>{a("patient_info_form")};return t.jsx(t.Fragment,{children:t.jsx(o.l0,{...b,children:t.jsx("form",{onSubmit:b.handleSubmit(N),className:"space-y-4 flex flex-col w-full",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-10 p-16 bg-gray-100 rounded-lg shadow-md w-[800px] mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Health Concern Assessment"}),t.jsx(o.Wi,{control:b.control,name:"chief_complaint",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Chief Complaint ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:(0,t.jsxs)(r.Ph,{value:e.value||"",onValueChange:s=>e.onChange(s),children:[(0,t.jsxs)(r.i4,{children:[" ",t.jsx(r.ki,{placeholder:"Chief Complaint"})]}),(0,t.jsxs)(r.Bw,{children:[" ",u?.map((e,s)=>t.jsx(r.Ql,{value:e.name,children:e.name},s))]})]})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"working_diagnosis",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Working Diagnosis ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"signs_and_symptoms",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Signs and Symptoms ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"allergies",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Allergies ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})})," ",t.jsx(o.Wi,{control:b.control,name:"case_type",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Case Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:(0,t.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",...e,value:"trauma",checked:"trauma"===e.value,className:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),t.jsx("span",{className:"text-gray-700",children:"Trauma"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",...e,value:"medical",checked:"medical"===e.value,className:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"}),t.jsx("span",{className:"text-gray-700",children:"Medical"})]})]})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"medication",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Medication ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})})," ",t.jsx(o.Wi,{control:b.control,name:"quantity",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Quantity ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})})," ",t.jsx(o.Wi,{control:b.control,name:"past_medical_history",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Past Medical History ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})})," ",t.jsx(o.Wi,{control:b.control,name:"assessment",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Assessment ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"remarks",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Remarks ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:b.control,name:"reason_for_consultation",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Reason for Consultation ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),(0,t.jsxs)("div",{className:"flex justify-center",children:[t.jsx(i.z,{className:"w-[300px] m-2",type:"button",onClick:()=>v(),children:"Back"}),t.jsx(i.z,{className:"w-[200px] m-2",type:"submit",children:l?"Save":"Continue"})]})]})})})})};var y=a(1028),b=a(17078),N=a(96571),v=a(87944);let _=x.z.object({medcert_data:x.z.string().nonempty("This is required"),medcert_remarks:x.z.string().nonempty("Remarks is required")}),w=({data:e,onContinue:s,setActiveTab:a})=>{let r=["health_concern","physical_exam","med_certificate","vaccination"],[l,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let s=[...e.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s));x(s.findIndex(e=>"med_certificate"===e)+1>=s.length)},[e.services]);let u=(0,d.cI)({resolver:(0,c.F)(_),defaultValues:{medcert_data:"",medcert_remarks:""}}),h=async a=>{let t={consultation_service:"med_certificate",...e,...a};if(0===(t.services||[]).length){console.error("No services selected");return}let n=[...t.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s)),l=n.findIndex(e=>"med_certificate"===e)+1;if(l<n.length){let e=n[l];try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?console.log("success"):console.error(s.message||"Insert failed")}catch(e){alert("Failed to connect to the server")}s(`${e}_form`)}else{console.log("Final payload:",t);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?(m.Z.fire({icon:"success",title:"Success!",text:"Patient data has been added successfully.",confirmButtonText:"OK"}),window.location.reload()):(console.error(s.message||"Insert failed"),m.Z.fire({icon:"error",title:"Error!",text:s.message||"Insert failed",confirmButtonText:"OK"}))}catch(e){alert("Failed to connect to the server")}}},f=()=>{a("patient_info_form")};return t.jsx(o.l0,{...u,children:t.jsx("form",{onSubmit:u.handleSubmit(h),className:"space-y-4 flex flex-col w-full",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-10 p-16 bg-gray-100 rounded-lg shadow-md w-[800px] mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Medical Certificate"}),t.jsx(o.Wi,{control:u.control,name:"medcert_data",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Working Diagnosis ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:u.control,name:"medcert_remarks",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Remarks ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Type here..."})}),t.jsx(o.zG,{})]})}),(0,t.jsxs)("div",{className:"flex justify-center",children:[t.jsx(i.z,{className:"w-[300px] m-2",type:"button",onClick:()=>f(),children:"Back"}),t.jsx(i.z,{className:"w-[300px] m-2",type:"submit",children:l?"Save":"Continue"})]})]})})})},z=x.z.object({status:x.z.string().nonempty("Status is required"),physical_exam_remarks:x.z.string().nonempty("Remarks is required")}),I=({data:e,onContinue:s,setActiveTab:a})=>{let r=["health_concern","physical_exam","med_certificate","vaccination"],[l,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let s=[...e.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s));x(s.findIndex(e=>"physical_exam"===e)+1>=s.length)},[e.services]);let u=(0,d.cI)({resolver:(0,c.F)(z),defaultValues:{status:"",physical_exam_remarks:""}}),h=async a=>{let t={consultation_service:"physical_exam",...e,...a};if(0===(t.services||[]).length){console.error("No services selected");return}let n=[...t.services||[]].sort((e,s)=>r.indexOf(e)-r.indexOf(s)),l=n.findIndex(e=>"physical_exam"===e)+1;if(l<n.length){let e=n[l];try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?console.log("success"):console.error(s.message||"Insert failed")}catch(e){alert("Failed to connect to the server")}s(`${e}_form`)}else{console.log("Final payload:",t);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patient-admission/new-consultation",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),s=await e.json();e.ok?(m.Z.fire({icon:"success",title:"Success!",text:"Patient data has been added successfully.",confirmButtonText:"OK"}),window.location.reload()):(console.error(s.message||"Insert failed"),m.Z.fire({icon:"error",title:"Error!",text:s.message||"Insert failed",confirmButtonText:"OK"}))}catch(e){alert("Failed to connect to the server")}}},f=()=>{a("patient_info_form")};return t.jsx(o.l0,{...u,children:t.jsx("form",{onSubmit:u.handleSubmit(h),className:"space-y-4 flex flex-col w-full",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-10 p-16 bg-gray-100 rounded-lg shadow-md w-[800px] mx-auto",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-700",children:"Physical Exam "}),t.jsx(o.Wi,{control:u.control,name:"status",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Status ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Explain here..."})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:u.control,name:"physical_exam_remarks",render:({field:e})=>(0,t.jsxs)(o.xJ,{className:"w-full",children:[(0,t.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Remarks ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Explain here..."})}),t.jsx(o.zG,{})]})}),(0,t.jsxs)("div",{className:"flex justify-center",children:[t.jsx(i.z,{className:"w-[300px] m-2",type:"button",onClick:()=>f(),children:"Back"}),t.jsx(i.z,{className:"w-[300px] m-2",type:"submit",children:l?"Save":"Continue"})]})]})})})};var T=a(72352);let C=async()=>{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/patients",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch patients");return e.json()};function k(){let[e,s]=(0,n.useState)([]),[a,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(null),[j,_]=(0,n.useState)(null),{control:z,setValue:k}=(0,d.cI)(),[S,P]=(0,n.useState)(!1),[O,E]=(0,n.useState)(!1),[G,W]=(0,n.useState)("patient_info_form"),[J,V]=(0,n.useState)([]),[X,F]=(0,n.useState)(null),A=e=>{W(e)};(0,n.useEffect)(()=>{P(!0),(async()=>{try{let e=(await C()).map(e=>({...e,age:(0,y.b)(Date.now(),new Date(e.date_of_birth))}));s(e)}catch(e){console.error("Error fetching patients:",e)}})()},[]);let D=e?.map(e=>({value:e.student_id,label:e.student_id,...e})),M=new Date,q=(0,b.WU)(M,"MMM-dd-yyyy h:mm a"),R=(0,d.cI)({resolver:(0,c.F)(N.T),defaultValues:{student_id:"",first_name:"",last_name:"",sex:"male",contact:"",email:"",address:"",date_of_birth:"",department:"",temperature:"",pulse_rate:"",respiratory_rate:"",blood_pressure:"",oxygen_saturation:"",pain_scale:"",services:[]}});(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/departments",{method:"GET",credentials:"include"}),s=await e.json();m(s)}catch(e){console.error("Failed to fetch departments:",e)}})();let e=localStorage.getItem("fullname");e&&u(e)},[]);let B=e=>{e&&"insert_new"!==e.value?(R.setValue("student_id",e.student_id||""),R.setValue("first_name",e.first_name),R.setValue("last_name",e.last_name),R.setValue("email",e.email),R.setValue("sex",e.sex),R.setValue("address",e.address),R.setValue("date_of_birth",e.date_of_birth),R.setValue("contact",e.contact),R.setValue("department",e.department),E(!1)):(E(!0),R.reset({student_id:"",first_name:"",last_name:"",email:"",sex:"male",address:"",date_of_birth:"",contact:"",department:""}))},Z=["health_concern","physical_exam","med_certificate","vaccination"],K=async e=>{let s={profile_photo:"default-profile.png",emasOnDuty:x??"",timestamp:(0,b.WU)(M,"yyyy-MM-dd HH:mm:ss")??"",...e};F(s),V(s.services);let a=s.services.sort((e,s)=>Z.indexOf(e)-Z.indexOf(s));a.includes("health_concern")?W("health_concern_form"):a.includes("physical_exam")?W("physical_exam_form"):a.includes("med_certificate")?W("med_certificate_form"):a.includes("vaccination")?W("vaccination_form"):console.log("No valid service selected")},$=[{label:"Health Concern",value:"health_concern"},{label:"Physical Exam",value:"physical_exam"},{label:"Medical Certificate",value:"med_certificate"},{label:"Vaccination",value:"vaccination"}];return(0,t.jsxs)("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto ",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("h1",{className:"text-xl font-semibold mb-8",children:"NEW CONSULTATION"})," "]}),t.jsx("div",{className:"bg-gray-200 rounded shadow-md shadow-slate-600 w-full p-4 space-y-4",children:(0,t.jsxs)(f.Tabs,{defaultValue:G,value:G,onValueChange:W,className:"w-full",children:[t.jsx(f.TabsList,{className:"flex justify-end w-full",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(f.TabsTrigger,{value:"patient_info_form",className:"ml-0",children:"PATIENT INFO"}),t.jsx(f.TabsTrigger,{value:"health_concern_form",disabled:!J.includes("medical"),children:"HEALTH CONCERN"}),t.jsx(f.TabsTrigger,{value:"physical_exam_form",disabled:!J.includes("physical_exam"),children:"PHYSICAL EXAM"}),t.jsx(f.TabsTrigger,{value:"med_certificate_form",disabled:!J.includes("med_certificate"),children:"MED CERTIFICATE"}),t.jsx(f.TabsTrigger,{value:"vaccination_form",disabled:!J.includes("vaccination"),children:"VACCINATION"})]})}),t.jsx(f.TabsContent,{value:"health_concern_form",children:t.jsx(g,{data:X,onContinue:A,setActiveTab:W})}),t.jsx(f.TabsContent,{value:"physical_exam_form",children:t.jsx(I,{data:X,onContinue:A,setActiveTab:W})}),t.jsx(f.TabsContent,{value:"med_certificate_form",children:t.jsx(w,{data:X,onContinue:A,setActiveTab:W})}),t.jsx(f.TabsContent,{value:"vaccination_form",children:t.jsx(h,{data:X,onContinue:A,setActiveTab:W})}),t.jsx(f.TabsContent,{value:"patient_info_form",children:t.jsx(o.l0,{...R,children:(0,t.jsxs)("form",{onSubmit:R.handleSubmit(K),className:"space-y-8 w-full",children:[S&&t.jsx(t.Fragment,{children:O?t.jsx("input",{type:"text",placeholder:"Enter new student ID",onChange:e=>R.setValue("student_id",e.target.value),className:"mt-2 w-full border rounded p-2"}):t.jsx(o.Wi,{control:z,name:"student_id",render:({field:e})=>t.jsx(t.Fragment,{children:t.jsx(v.ZP,{...e,options:D,placeholder:"Select Student ID",onChange:s=>{e.onChange(s),B(s)},isClearable:!0})})})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("legend",{className:"text-lg font-bold text-left",children:"Information"}),t.jsx(o.Wi,{control:R.control,name:"first_name",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Firstname"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Firstname"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"last_name",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Lastname"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Lastname"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"email",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Email"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Email"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"sex",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Sex"}),t.jsx(o.NI,{children:(0,t.jsxs)(r.Ph,{value:e.value||"",onValueChange:s=>e.onChange(s),children:[t.jsx(r.i4,{children:t.jsx(r.ki,{placeholder:"Sex"})}),t.jsx(r.Bw,{children:N.T.shape.sex.options.map(e=>t.jsx(r.Ql,{value:e,children:e},e.toLowerCase()))})]})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"date_of_birth",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Birthdate"}),t.jsx(o.NI,{children:t.jsx("input",{type:"date",...e,id:e.name,className:"w-full border rounded p-2"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"address",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Home Address"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Home Address"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"contact",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Contact Number"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Contact Number"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"department",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Department"}),t.jsx(o.NI,{children:(0,t.jsxs)(r.Ph,{value:e.value||"",onValueChange:s=>e.onChange(s),children:[t.jsx(r.i4,{children:t.jsx(r.ki,{placeholder:"Select Department"})}),t.jsx(r.Bw,{children:a.map(e=>t.jsx(r.Ql,{value:e.id.toString(),children:e.name},e.id))})]})}),t.jsx(o.zG,{})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("legend",{className:"text-lg font-bold text-left",children:"Vital Signs"}),t.jsx(o.Wi,{control:R.control,name:"temperature",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Temperature"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Temperature"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"pulse_rate",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Pulse Rate"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Pulse Rate"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"respiratory_rate",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Respiratory Rate"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Respiratory Rate"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"blood_pressure",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Blood Pressure"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Blood Pressure"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"oxygen_saturation",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Oxygen Saturation"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Oxygen Saturation"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"pain_scale",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Pain Scale"}),t.jsx(o.NI,{children:t.jsx(l.I,{...e,placeholder:"Pain Scale"})}),t.jsx(o.zG,{})]})}),t.jsx(o.Wi,{control:R.control,name:"nurseNotes",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"ml-2",children:"Nurse notes"}),t.jsx(o.NI,{children:t.jsx(p.g,{...e,placeholder:"Nurse notes",rows:5})}),t.jsx(o.zG,{})]})})]}),t.jsx("div",{className:"space-y-6 p-4   ",children:t.jsx(o.Wi,{control:R.control,name:"services",render:({field:e})=>(0,t.jsxs)(o.xJ,{children:[t.jsx(o.lX,{className:"block text-xl font-bold text-gray-800",children:"Services"}),t.jsx(o.NI,{children:t.jsx("div",{className:"flex flex-col space-y-4",children:$.map(s=>(0,t.jsxs)("label",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",value:s.value,checked:e.value.includes(s.value),onChange:s=>{let{value:a}=s.target,t=s.target.checked?[...e.value,a]:e.value.filter(e=>e!==a);e.onChange(t)},className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-700 text-sm font-medium",children:s.label})]},s.value))})}),t.jsx(o.zG,{})]})})})]}),(0,t.jsxs)("h3",{children:["Created by: ",x??""]}),(0,t.jsxs)("h3",{children:["Current Date: ",q," "]}),(0,t.jsxs)("div",{className:"flex justify-center",children:[t.jsx(T.default,{href:"/admissions",children:t.jsx(i.z,{className:"w-[200px] m-5",children:"Back"})}),t.jsx(i.z,{type:"submit",className:"w-full max-w-[200px] m-5",children:"Continue"})]})]})})})]})})]})}},69224:(e,s,a)=>{"use strict";a.r(s),a.d(s,{Tabs:()=>T,TabsContent:()=>S,TabsList:()=>C,TabsTrigger:()=>k});var t=a(10439),n=a(21526),r=a(29568),l=a(97277),i=a(5371),o=a(17450),c=a(88485),d=a(82303),m=a(92390),x=a(68792),u=a(15552);let p="Tabs",[h,f]=(0,i.b)(p,[o.Pc]),j=(0,o.Pc)(),[g,y]=h(p),b=(0,n.forwardRef)((e,s)=>{let{__scopeTabs:a,value:t,onValueChange:l,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:p="automatic",...h}=e,f=(0,m.gm)(c),[j,y]=(0,x.T)({prop:t,onChange:l,defaultProp:i});return(0,n.createElement)(g,{scope:a,baseId:(0,u.M)(),value:j,onValueChange:y,orientation:o,dir:f,activationMode:p},(0,n.createElement)(d.WV.div,(0,r.Z)({dir:f,"data-orientation":o},h,{ref:s})))}),N=(0,n.forwardRef)((e,s)=>{let{__scopeTabs:a,loop:t=!0,...l}=e,i=y("TabsList",a),c=j(a);return(0,n.createElement)(o.fC,(0,r.Z)({asChild:!0},c,{orientation:i.orientation,dir:i.dir,loop:t}),(0,n.createElement)(d.WV.div,(0,r.Z)({role:"tablist","aria-orientation":i.orientation},l,{ref:s})))}),v=(0,n.forwardRef)((e,s)=>{let{__scopeTabs:a,value:t,disabled:i=!1,...c}=e,m=y("TabsTrigger",a),x=j(a),u=w(m.baseId,t),p=z(m.baseId,t),h=t===m.value;return(0,n.createElement)(o.ck,(0,r.Z)({asChild:!0},x,{focusable:!i,active:h}),(0,n.createElement)(d.WV.button,(0,r.Z)({type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u},c,{ref:s,onMouseDown:(0,l.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():m.onValueChange(t)}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&m.onValueChange(t)}),onFocus:(0,l.M)(e.onFocus,()=>{let e="manual"!==m.activationMode;h||i||!e||m.onValueChange(t)})})))}),_=(0,n.forwardRef)((e,s)=>{let{__scopeTabs:a,value:t,forceMount:l,children:i,...o}=e,m=y("TabsContent",a),x=w(m.baseId,t),u=z(m.baseId,t),p=t===m.value,h=(0,n.useRef)(p);return(0,n.useEffect)(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,n.createElement)(c.z,{present:l||p},({present:a})=>(0,n.createElement)(d.WV.div,(0,r.Z)({"data-state":p?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!a,id:u,tabIndex:0},o,{ref:s,style:{...e.style,animationDuration:h.current?"0s":void 0}}),a&&i))});function w(e,s){return`${e}-trigger-${s}`}function z(e,s){return`${e}-content-${s}`}var I=a(76325);let T=b,C=n.forwardRef(({className:e,...s},a)=>t.jsx(N,{ref:a,className:(0,I.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));C.displayName=N.displayName;let k=n.forwardRef(({className:e,...s},a)=>t.jsx(v,{ref:a,className:(0,I.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));k.displayName=v.displayName;let S=n.forwardRef(({className:e,...s},a)=>t.jsx(_,{ref:a,className:(0,I.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));S.displayName=_.displayName},3708:(e,s,a)=>{"use strict";a.d(s,{g:()=>l});var t=a(10439),n=a(21526),r=a(76325);let l=n.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));l.displayName="Textarea"},96571:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var t=a(72117);let n=t.z.object({student_id:t.z.string(),first_name:t.z.string().min(2).max(100),last_name:t.z.string().min(2).max(100),sex:t.z.enum(["male","female"]),contact:t.z.string().regex(/^[0-9+\-\s()]{10,20}$/,{message:"Invalid contact number format"}),email:t.z.string().email(),address:t.z.string(),date_of_birth:t.z.string().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid date format"}),department:t.z.coerce.string(),department_name:t.z.coerce.string().optional(),cases:t.z.string().optional(),vitalSigns:t.z.string().optional(),actions:t.z.string().optional(),common_reasons:t.z.string().optional(),reasons:t.z.string().optional(),prescription:t.z.string().optional(),nurseNotes:t.z.string().optional(),emasOnDuty:t.z.string().optional(),timestamp:t.z.string().optional(),temperature:t.z.string().optional(),pulse_rate:t.z.string().optional(),respiratory_rate:t.z.string().optional(),blood_pressure:t.z.string().optional(),oxygen_saturation:t.z.string().optional(),pain_scale:t.z.string().optional(),services:t.z.array(t.z.string()).min(1,"Select at least one service")})},14886:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n,metadata:()=>t});let t={title:"Admissions — UCPI Portal"};function n({children:e}){return e}},1427:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>r,__esModule:()=>n,default:()=>l});let t=(0,a(49705).createProxy)(String.raw`C:\Users\Alyson\Desktop\ucpip-v1\frontend\src\app\(portal)\admissions\menu\page.tsx`),{__esModule:n,$$typeof:r}=t,l=t.default}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[675,3195,8036,2336,2352,6367,9403,8889,9786,4004,5143,2867,252,7078,1362,8518],()=>a(65044));module.exports=t})();