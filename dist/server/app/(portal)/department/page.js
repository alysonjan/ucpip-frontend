(()=>{var e={};e.id=1750,e.ids=[1750],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},38525:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(43739),n=a(65208),r=a(5313),l=a.n(r),o=a(54054),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let d=["",{children:["(portal)",{children:["department",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,40994)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\department\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,96543)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\department\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,95985)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,74969)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\department\\page.tsx"],p="/(portal)/department/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(portal)/department/page",pathname:"/department",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34676:(e,t,a)=>{Promise.resolve().then(a.bind(a,95924))},9833:()=>{},95924:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(10439),n=a(37049),r=a(93865),l=a(13243),o=a(34249),i=a(73893),d=a(57996),c=a(62603),p=a(62875),u=a(92354),m=a(21526),x=a(48424),g=a(23057);function h(){let[e,t]=(0,m.useState)([]),[a,h]=(0,m.useState)(!0),[f,y]=(0,m.useState)(""),[j,v]=(0,m.useState)({pageIndex:0,pageSize:7}),[w,b]=(0,m.useState)(null),[N,C]=(0,m.useState)(!1),[P,k]=(0,m.useState)(!1),[D,S]=(0,m.useState)(null),[_,A]=(0,m.useState)(""),[q,O]=(0,m.useState)("");(0,m.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/departments",{method:"GET",credentials:"include"}),a=await e.json();t(a)}catch(e){console.error("Failed to fetch departments:",e)}finally{h(!1)}})()},[]);let z=e=>{let t=e.original;S(t),A(t.name),C(!0)},I=()=>{k(!0)},T=async()=>{if(D)try{let e={id:D.id,name:_,action:"edit"},t=await fetch("https://ucpip-backend-production.up.railway.app/api/save-department",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});console.log("Department updated:",{id:D.id,name:_}),S(null);let a=await t.json();t.ok?(x.Z.fire({icon:"success",title:"Success!",text:a.message,confirmButtonText:"OK"}),window.location.reload()):(console.error(a.message||"Update failed"),x.Z.fire({icon:"error",title:"Error!",text:a.message||"Update failed",confirmButtonText:"OK"}))}catch(e){console.error("Failed to update department:",e)}},E=async()=>{try{if(""===q)return;let e=await fetch("https://ucpip-backend-production.up.railway.app/api/save-department",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:q})});S(null);let t=await e.json();e.ok?(x.Z.fire({icon:"success",title:"Success!",text:t.message,confirmButtonText:"OK"}),window.location.reload()):(console.error(t.message||"Create failed"),x.Z.fire({icon:"error",title:"Error!",text:t.message||"Create failed",confirmButtonText:"OK"}))}catch(e){console.error("Failed to add department:",e)}},Z=e=>{x.Z.fire({title:"Are you sure?",text:"Do you really want to delete this department?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&B(e)})},B=async e=>{b(null);try{let t=await fetch("https://ucpip-backend-production.up.railway.app/api/delete-department",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:e})}),a=await t.json();t.ok?x.Z.fire({icon:"success",title:"Success",text:"Department deleted successfully!",timer:1e3,showConfirmButton:!1,willClose:()=>{window.location.reload()}}):b(a.message||"Delete failed")}catch(e){b("Failed to connect to the server")}},M=(0,i.b7)({data:e,columns:[{accessorKey:"name",header:()=>s.jsx("div",{className:"text-center",children:"Department Name"}),cell:({getValue:e})=>s.jsx("div",{className:"text-center",children:e()})},{accessorKey:"edit",header:()=>s.jsx("div",{className:"text-center",children:"Edit"}),cell:({row:e})=>s.jsx("div",{className:"text-center",children:(0,s.jsxs)(n.z,{variant:"outline",className:"flex items-center gap-2 text-white bg-green-800 hover:bg-green-700",onClick:()=>z(e),children:[s.jsx(c.Z,{size:"1rem"}),"EDIT"]})})},{accessorKey:"delete",header:()=>s.jsx("div",{className:"text-center",children:"Delete"}),cell:({row:e})=>s.jsx("div",{className:"text-center",children:(0,s.jsxs)(n.z,{variant:"outline",className:"flex items-center gap-2 text-white bg-red-800 hover:bg-red-700",onClick:()=>Z(e.original.id),children:[s.jsx(p.Z,{size:"1rem"}),"DELETE"]})})}],getCoreRowModel:(0,d.sC)(),getFilteredRowModel:(0,d.vL)(),getPaginationRowModel:(0,d.G_)(),state:{globalFilter:f,pagination:j},onGlobalFilterChange:y,onPaginationChange:v});return(0,s.jsxs)(s.Fragment,{children:[a?s.jsx("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto",children:s.jsx("h1",{className:"text-xl font-semibold",children:"Loading departments..."})}):(0,s.jsxs)("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Departments"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(r.I,{placeholder:"Filter patients…",value:f,onChange:e=>y(e.target.value),className:"max-w-sm"})}),(0,s.jsxs)("div",{className:"bg-white rounded shadow-md shadow-slate-600 w-full",children:[(0,s.jsxs)(l.iA,{children:[s.jsx(l.xD,{children:M.getHeaderGroups().map(e=>s.jsx(l.SC,{children:e.headers.map(e=>s.jsx(l.ss,{className:"bg-blue-500 text-white",children:e.isPlaceholder?null:(0,i.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),s.jsx(l.RM,{children:M.getRowModel().rows.length?M.getRowModel().rows.map(e=>s.jsx(l.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>s.jsx(l.pj,{children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):s.jsx(l.SC,{children:s.jsx(l.pj,{colSpan:M.getVisibleFlatColumns().length,className:"h-24 text-center",children:"No results."})})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 p-3",children:[s.jsx(n.z,{onClick:()=>v(e=>({...e,pageIndex:Math.max(0,e.pageIndex-1)})),disabled:0===j.pageIndex,className:`bg-gray-800 text-white ${0===j.pageIndex?"cursor-not-allowed":"hover:bg-gray-700"} p-3`,children:"Previous"}),M.getPageCount()>1&&(0,s.jsxs)("span",{children:["Page ",j.pageIndex+1," of ",M.getPageCount()]}),s.jsx(n.z,{onClick:()=>v(e=>({...e,pageIndex:Math.min(M.getPageCount()-1,e.pageIndex+1)})),disabled:j.pageIndex>=M.getPageCount()-1,className:`bg-gray-800 text-white ${j.pageIndex>=M.getPageCount()-1?"cursor-not-allowed":"hover:bg-gray-700"} p-3`,children:"Next"})]})]}),s.jsx("div",{className:"fixed bottom-6 right-6 space-y-4",children:s.jsx("div",{className:"relative group",children:s.jsx(g.pn,{children:(0,s.jsxs)(g.u,{children:[s.jsx(g.aJ,{asChild:!0,children:s.jsx(n.z,{className:"bg-[#800000] text-white w-12 h-12 rounded-full shadow-lg hover:bg-[#660000] focus:outline-none focus:ring-2 focus:ring-[#800000] focus:ring-offset-2 flex items-center justify-center",style:{display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>I(),children:s.jsx(u.Z,{})})}),s.jsx(g._v,{children:s.jsx("p",{children:"ADD"})})]})})})})]}),e&&s.jsx(o.Vq,{open:N,onOpenChange:C,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[s.jsx(o.$N,{children:"Edit Department"}),s.jsx(o.Be,{children:"Department Name"})]}),(0,s.jsxs)("div",{children:[s.jsx("input",{id:"departmentName",type:"text",value:_,onChange:e=>A(e.target.value),className:"w-full p-2 border border-gray-300 rounded"}),s.jsx(n.z,{className:"mt-4",onClick:T,children:"Save Changes"})]})]})}),s.jsx(o.Vq,{open:P,onOpenChange:k,children:(0,s.jsxs)(o.cZ,{children:[(0,s.jsxs)(o.fK,{children:[s.jsx(o.$N,{children:"Create Department"}),s.jsx(o.Be,{children:"Department Name"})]}),(0,s.jsxs)("div",{children:[s.jsx("input",{id:"departmentName",type:"text",value:q,onChange:e=>O(e.target.value),className:"w-full p-2 border border-gray-300 rounded"}),s.jsx(n.z,{className:"mt-4",onClick:E,children:"Save"})]})]})})]})}},34249:(e,t,a)=>{"use strict";a.d(t,{$N:()=>x,Be:()=>g,Vq:()=>i,cZ:()=>u,fK:()=>m,hg:()=>d});var s=a(10439),n=a(21526),r=a(73488),l=a(62077),o=a(76325);let i=r.fC,d=r.xz,c=r.h_;r.x8;let p=n.forwardRef(({className:e,...t},a)=>s.jsx(r.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=r.aV.displayName;let u=n.forwardRef(({className:e,children:t,...a},n)=>(0,s.jsxs)(c,{children:[s.jsx(p,{}),(0,s.jsxs)(r.VY,{ref:n,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(l.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=r.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=n.forwardRef(({className:e,...t},a)=>s.jsx(r.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=r.Dx.displayName;let g=n.forwardRef(({className:e,...t},a)=>s.jsx(r.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=r.dk.displayName},96543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>s});let s={title:"Departments — UCPI Portal"};function n({children:e}){return e}},40994:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>n,default:()=>l});let s=(0,a(49705).createProxy)(String.raw`C:\Users\Alyson\Desktop\ucpip-v1\frontend\src\app\(portal)\department\page.tsx`),{__esModule:n,$$typeof:r}=s,l=s.default},68972:(e,t,a)=>{"use strict";a.d(t,{j:()=>r});let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,n=function(){for(var e,t,a=0,s="";a<arguments.length;)(e=arguments[a++])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(a=0;a<t.length;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s);else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(s&&(s+=" "),s+=t);return s},r=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:l,defaultVariants:o}=t,i=Object.keys(l).map(e=>{let t=null==a?void 0:a[e],n=null==o?void 0:o[e];if(null===t)return null;let r=s(t)||s(n);return l[e][r]}),d=a&&Object.entries(a).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return n(e,i,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...o,...d}[t]):({...o,...d})[t]===a})?[...e,a,s]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[675,3195,8036,2336,2352,6367,9403,8889,4004,3893,2376,3631,7934],()=>a(38525));module.exports=s})();