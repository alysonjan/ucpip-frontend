(()=>{var e={};e.id=4780,e.ids=[4780],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},63641:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(43739),a=s(65208),n=s(5313),l=s.n(n),o=s(54054),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["(portal)",{children:["doctors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97196)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\doctors\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,60127)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\doctors\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,95985)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,74969)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\doctors\\page.tsx"],u="/(portal)/doctors/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(portal)/doctors/page",pathname:"/doctors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},96678:(e,t,s)=>{Promise.resolve().then(s.bind(s,86513))},9833:()=>{},86513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(10439),a=s(37049),n=s(93865),l=s(13243),o=s(34249),i=s(73893),c=s(57996),d=s(62603),u=s(62875),m=s(92354),p=s(21526),x=s(48424),f=s(23057),h=s(28465),g=s(35280),j=s(47435),y=s(59816);function v(){let[e,t]=(0,p.useState)([]),[s,v]=(0,p.useState)(null),[w,N]=(0,p.useState)(!0),[b,C]=(0,p.useState)(""),[P,I]=(0,p.useState)({pageIndex:0,pageSize:7}),[_,S]=(0,p.useState)(null),[D,k]=(0,p.useState)(!1),[F,z]=(0,p.useState)(!1),[E,R]=(0,p.useState)(null),V=(0,h.cI)({resolver:(0,g.F)(j.a),defaultValues:s||{fullname:"",prc_license:""}});(0,p.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/doctors",{method:"GET",credentials:"include"}),s=await e.json();t(s)}catch(e){console.error("Failed to fetch departments:",e)}finally{N(!1)}})(),V.reset(s||{fullname:"",prc_license:""})},[s,V]);let q=e=>{v({id:e.original.id,fullname:e.original.fullname,prc_license:e.original.prc_license}),k(!0)},G=()=>{v(null),z(!0)},A=e=>{let t=e.target.files?.[0];t&&R(t)},M=async e=>{let t=s?"edit":"add";if("edit"===t){let r={action:t,id:s?.id,...e};try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/save-doctor",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}),t=await e.json();e.ok?x.Z.fire({icon:"success",title:"Updated",text:t.message,showConfirmButton:!1,timer:1e3,willClose:()=>{window.location.reload()}}):x.Z.fire({icon:"error",title:"Error!",text:t.message||"Operation failed",confirmButtonText:"OK"})}catch(e){console.error(`Error during ${t}:`,e),alert("Failed to connect to the server")}}else if(E){let s=new FormData;s.append("action",t),s.append("fullname",e.fullname),s.append("prc_license",e.prc_license),s.append("signature",E);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/save-doctor",{method:"POST",credentials:"include",body:s}),t=await e.json();e.ok?x.Z.fire({icon:"success",title:"Created",text:t.message,showConfirmButton:!1,timer:1e3,willClose:()=>{window.location.reload()}}):x.Z.fire({icon:"error",title:"Error!",text:t.message||"Operation failed",confirmButtonText:"OK"})}catch(e){console.error(`Error during ${t}:`,e),alert("Failed to connect to the server")}}},O=e=>{x.Z.fire({title:"Are you sure?",text:"Do you really want to delete this department?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&$(e)})},$=async e=>{S(null);try{let t=await fetch("https://ucpip-backend-production.up.railway.app/api/delete-doctor",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:e})}),s=await t.json();t.ok?x.Z.fire({icon:"success",title:"Success",text:"Doctor deleted successfully!",timer:1e3,showConfirmButton:!1,willClose:()=>{window.location.reload()}}):S(s.message||"Delete failed")}catch(e){S("Failed to connect to the server")}},T=(0,i.b7)({data:e,columns:[{accessorKey:"fullname",header:()=>r.jsx("div",{className:"text-center",children:"Full Name"}),cell:({getValue:e})=>r.jsx("div",{className:"text-center",children:e()})},{accessorKey:"prc_license",header:()=>r.jsx("div",{className:"text-center",children:"PRC License #"}),cell:({getValue:e})=>r.jsx("div",{className:"text-center",children:e()})},{accessorKey:"edit",header:()=>r.jsx("div",{className:"text-center",children:"Edit"}),cell:({row:e})=>r.jsx("div",{className:"flex justify-center",children:(0,r.jsxs)(a.z,{variant:"outline",className:"flex items-center gap-2 text-white bg-green-800 hover:bg-green-700",onClick:()=>q(e),children:[r.jsx(d.Z,{size:"1rem"}),"EDIT"]})})},{accessorKey:"delete",header:()=>r.jsx("div",{className:"text-center",children:"Delete"}),cell:({row:e})=>r.jsx("div",{className:"flex justify-center",children:(0,r.jsxs)(a.z,{variant:"outline",className:"flex items-center gap-2 text-white bg-red-800 hover:bg-red-700",onClick:()=>O(e.getValue("prc_license")),children:[r.jsx(u.Z,{size:"1rem"}),"DELETE"]})})}],getCoreRowModel:(0,c.sC)(),getFilteredRowModel:(0,c.vL)(),getPaginationRowModel:(0,c.G_)(),state:{globalFilter:b,pagination:P},onGlobalFilterChange:C,onPaginationChange:I});return(0,r.jsxs)(r.Fragment,{children:[w?r.jsx("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto",children:r.jsx("h1",{className:"text-xl font-semibold",children:"Loading doctors..."})}):(0,r.jsxs)("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Doctors"}),r.jsx("div",{className:"flex gap-2",children:r.jsx(n.I,{placeholder:"Filter patients…",value:b,onChange:e=>C(e.target.value),className:"max-w-sm"})}),(0,r.jsxs)("div",{className:"bg-white rounded shadow-md shadow-slate-600 w-full",children:[(0,r.jsxs)(l.iA,{children:[r.jsx(l.xD,{children:T.getHeaderGroups().map(e=>r.jsx(l.SC,{children:e.headers.map(e=>r.jsx(l.ss,{className:"bg-blue-500 text-white",children:e.isPlaceholder?null:(0,i.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),r.jsx(l.RM,{children:T.getRowModel().rows.length?T.getRowModel().rows.map(e=>r.jsx(l.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>r.jsx(l.pj,{children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):r.jsx(l.SC,{children:r.jsx(l.pj,{colSpan:T.getVisibleFlatColumns().length,className:"h-24 text-center",children:"No results."})})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4 p-3",children:[r.jsx(a.z,{onClick:()=>I(e=>({...e,pageIndex:Math.max(0,e.pageIndex-1)})),disabled:0===P.pageIndex,className:`bg-gray-800 text-white ${0===P.pageIndex?"cursor-not-allowed":"hover:bg-gray-700"} p-3`,children:"Previous"}),T.getPageCount()>1&&(0,r.jsxs)("span",{children:["Page ",P.pageIndex+1," of ",T.getPageCount()]}),r.jsx(a.z,{onClick:()=>I(e=>({...e,pageIndex:Math.min(T.getPageCount()-1,e.pageIndex+1)})),disabled:P.pageIndex>=T.getPageCount()-1,className:`bg-gray-800 text-white ${P.pageIndex>=T.getPageCount()-1?"cursor-not-allowed":"hover:bg-gray-700"} p-3`,children:"Next"})]})]}),r.jsx("div",{className:"fixed bottom-6 right-6 space-y-4",children:r.jsx("div",{className:"relative group",children:r.jsx(f.pn,{children:(0,r.jsxs)(f.u,{children:[r.jsx(f.aJ,{asChild:!0,children:r.jsx(a.z,{className:"bg-[#800000] text-white w-12 h-12 rounded-full shadow-lg hover:bg-[#660000] focus:outline-none focus:ring-2 focus:ring-[#800000] focus:ring-offset-2 flex items-center justify-center",style:{display:"flex",alignItems:"center",gap:"0.5rem"},onClick:()=>G(),children:r.jsx(m.Z,{})})}),r.jsx(f._v,{children:r.jsx("p",{children:"ADD"})})]})})})})]}),e&&r.jsx(o.Vq,{open:D,onOpenChange:k,children:(0,r.jsxs)(o.cZ,{children:[(0,r.jsxs)(o.fK,{children:[r.jsx(o.$N,{children:"Edit Doctor"}),r.jsx(o.Be,{children:"Doctor Details"})]}),r.jsx("div",{children:r.jsx(y.l0,{...V,children:(0,r.jsxs)("form",{onSubmit:V.handleSubmit(M),className:"space-y-4 flex flex-col w-full",children:[r.jsx(y.Wi,{control:V.control,name:"fullname",render:({field:e})=>(0,r.jsxs)(y.xJ,{className:"w-full",children:[(0,r.jsxs)(y.lX,{className:"font-bold text-gray-600",children:["Fullname ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(y.NI,{children:r.jsx(n.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Fullname"})}),r.jsx(y.zG,{})]})}),r.jsx(y.Wi,{control:V.control,name:"prc_license",render:({field:e})=>(0,r.jsxs)(y.xJ,{className:"w-full",children:[(0,r.jsxs)(y.lX,{className:"font-bold text-gray-600",children:["PRC License # ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(y.NI,{children:r.jsx(n.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"PRC License #"})}),r.jsx(y.zG,{})]})}),r.jsx(a.z,{className:"mt-4",type:"submit",children:"Save"})]})})})]})}),r.jsx(o.Vq,{open:F,onOpenChange:z,children:(0,r.jsxs)(o.cZ,{children:[(0,r.jsxs)(o.fK,{children:[r.jsx(o.$N,{children:"Doctor"}),r.jsx(o.Be,{children:"Add new"})]}),r.jsx("div",{children:r.jsx(y.l0,{...V,children:(0,r.jsxs)("form",{onSubmit:V.handleSubmit(M),className:"space-y-4 flex flex-col w-full",children:[r.jsx(y.Wi,{control:V.control,name:"fullname",render:({field:e})=>(0,r.jsxs)(y.xJ,{className:"w-full",children:[(0,r.jsxs)(y.lX,{className:"font-bold text-gray-600",children:["Fullname ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(y.NI,{children:r.jsx(n.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Fullname"})}),r.jsx(y.zG,{})]})}),r.jsx(y.Wi,{control:V.control,name:"prc_license",render:({field:e})=>(0,r.jsxs)(y.xJ,{className:"w-full",children:[(0,r.jsxs)(y.lX,{className:"font-bold text-gray-600",children:["PRC License # ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(y.NI,{children:r.jsx(n.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"PRC License #"})}),r.jsx(y.zG,{})]})}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("label",{className:"font-bold text-gray-600",children:["Signature ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>A(e),className:"w-full mt-2"})]}),r.jsx(a.z,{className:"mt-4",type:"submit",children:"Save"})]})})})]})})]})}},34249:(e,t,s)=>{"use strict";s.d(t,{$N:()=>x,Be:()=>f,Vq:()=>i,cZ:()=>m,fK:()=>p,hg:()=>c});var r=s(10439),a=s(21526),n=s(73488),l=s(62077),o=s(76325);let i=n.fC,c=n.xz,d=n.h_;n.x8;let u=a.forwardRef(({className:e,...t},s)=>r.jsx(n.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=n.aV.displayName;let m=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(d,{children:[r.jsx(u,{}),(0,r.jsxs)(n.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(l.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.VY.displayName;let p=({className:e,...t})=>r.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});p.displayName="DialogHeader";let x=a.forwardRef(({className:e,...t},s)=>r.jsx(n.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=n.Dx.displayName;let f=a.forwardRef(({className:e,...t},s)=>r.jsx(n.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));f.displayName=n.dk.displayName},59816:(e,t,s)=>{"use strict";s.d(t,{NI:()=>h,Wi:()=>u,l0:()=>c,lX:()=>f,pf:()=>g,xJ:()=>x,zG:()=>j});var r=s(10439),a=s(21526),n=s(77354),l=s(28465),o=s(76325),i=s(67647);let c=l.RV,d=a.createContext({}),u=({...e})=>r.jsx(d.Provider,{value:{name:e.name},children:r.jsx(l.Qr,{...e})}),m=()=>{let e=a.useContext(d),t=a.useContext(p),{getFieldState:s,formState:r}=(0,l.Gc)(),n=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},p=a.createContext({}),x=a.forwardRef(({className:e,...t},s)=>{let n=a.useId();return r.jsx(p.Provider,{value:{id:n},children:r.jsx("div",{ref:s,className:e,...t})})});x.displayName="FormItem";let f=a.forwardRef(({className:e,...t},s)=>{let{error:a,formItemId:n}=m();return r.jsx(i.Label,{ref:s,className:(0,o.cn)(a&&"text-destructive",e),htmlFor:n,...t})});f.displayName="FormLabel";let h=a.forwardRef(({...e},t)=>{let{error:s,formItemId:a,formDescriptionId:l,formMessageId:o}=m();return r.jsx(n.g7,{ref:t,id:a,"aria-describedby":s?`${l} ${o}`:`${l}`,"aria-invalid":!!s,...e})});h.displayName="FormControl";let g=a.forwardRef(({className:e,...t},s)=>{let{formDescriptionId:a}=m();return r.jsx("p",{ref:s,id:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})});g.displayName="FormDescription";let j=a.forwardRef(({className:e,children:t,...s},a)=>{let{error:n,formMessageId:l}=m(),i=n?String(n?.message):t;return i?r.jsx("p",{ref:a,id:l,className:(0,o.cn)("text-sm font-medium text-destructive",e),...s,children:i}):null});j.displayName="FormMessage"},67647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Label:()=>c});var r=s(10439),a=s(21526),n=s(32590),l=s(68972),o=s(76325);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>r.jsx(n.f,{ref:s,className:(0,o.cn)(i(),e),...t}));c.displayName=n.f.displayName},47435:(e,t,s)=>{"use strict";s.d(t,{a:()=>a});var r=s(72117);let a=r.z.object({id:r.z.number().optional(),fullname:r.z.string().nonempty("This is required"),prc_license:r.z.string().nonempty("This is required")})},60127:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,metadata:()=>r});let r={title:"Doctors — UCPI Portal"};function a({children:e}){return e}},97196:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(49705).createProxy)(String.raw`C:\Users\Alyson\Desktop\ucpip-v1\frontend\src\app\(portal)\doctors\page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},35280:(e,t,s)=>{"use strict";s.d(t,{F:()=>c});var r=s(28465),a=function(e,t,s){if(e&&"reportValidity"in e){var a=(0,r.U2)(s,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},n=function(e,t){var s=function(s){var r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?a(r.ref,s,e):r.refs&&r.refs.forEach(function(t){return a(t,s,e)})};for(var r in t.fields)s(r)},l=function(e,t){t.shouldUseNativeValidation&&n(e,t);var s={};for(var a in e){var l=(0,r.U2)(t.fields,a),i=Object.assign(e[a]||{},{ref:l&&l.ref});if(o(t.names||Object.keys(e),a)){var c=Object.assign({},(0,r.U2)(s,a));(0,r.t8)(c,"root",i),(0,r.t8)(s,a,c)}else(0,r.t8)(s,a,i)}return s},o=function(e,t){return e.some(function(e){return e.startsWith(t+".")})},i=function(e,t){for(var s={};e.length;){var a=e[0],n=a.code,l=a.message,o=a.path.join(".");if(!s[o]){if("unionErrors"in a){var i=a.unionErrors[0].errors[0];s[o]={message:i.message,type:i.code}}else s[o]={message:l,type:n}}if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=s[o].types,d=c&&c[a.code];s[o]=(0,r.KN)(o,t,s,n,d?[].concat(d,a.message):a.message)}e.shift()}return s},c=function(e,t,s){return void 0===s&&(s={}),function(r,a,o){try{return Promise.resolve(function(a,l){try{var i=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](r,t)).then(function(e){return o.shouldUseNativeValidation&&n({},o),{errors:{},values:s.raw?r:e}})}catch(e){return l(e)}return i&&i.then?i.then(void 0,l):i}(0,function(e){if(null!=e.errors)return{values:{},errors:l(i(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(e){return Promise.reject(e)}}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[675,3195,8036,2336,2352,6367,9403,8889,9786,4004,3893,2376,3631,7934],()=>s(63641));module.exports=r})();