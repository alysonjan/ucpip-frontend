(()=>{var e={};e.id=1883,e.ids=[1883],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},87813:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(43739),n=r(65208),a=r(5313),o=r.n(a),l=r(54054),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let c=["",{children:["(portal)",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79046)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\documents\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,88645)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\documents\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,95985)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,74969)),"C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7434,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,98059))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Alyson\\Desktop\\ucpip-v1\\frontend\\src\\app\\(portal)\\documents\\page.tsx"],u="/(portal)/documents/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(portal)/documents/page",pathname:"/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17968:(e,t,r)=>{Promise.resolve().then(r.bind(r,74140))},9833:()=>{},35748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79244).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},600:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79244).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},74140:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(10439),n=r(37049),a=r(34249),o=r(59816),l=r(93865),i=r(48449),c=r(47435),d=r(35280),u=r(600),p=r(89743),m=r(21526),f=r(28465),x=r(48424),h=r(72117);let g=h.z.object({student_id:h.z.string().min(2).max(32),doctype:h.z.enum(["Physical Exam","Medical Certificate","Clinical Note","Referral Form"]),doctor:h.z.string().min(2).max(32)}),y=async()=>{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/doctors",{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch patients");return e.json()},j={"Physical Exam":"/new-template/physical-exam-template_page.jpg","Medical Certificate":"/new-template/medical-certificate-template_page.jpg","Clinical Note":"/new-template/clinic-note-template_page.jpg","Referral Form":"/new-template/referral-form-template_page.jpg"};function v(){let[e,t]=(0,m.useState)(null),[r,h]=(0,m.useState)([]),[v,w]=(0,m.useState)(null),[b,N]=(0,m.useState)(!1),[C,P]=(0,m.useState)(null),_=(0,f.cI)({resolver:(0,d.F)(g),defaultValues:{student_id:"",doctor:""}}),k=(0,f.cI)({resolver:(0,d.F)(c.a),defaultValues:v||{fullname:"",prc_license:""}});(0,m.useEffect)(()=>{(async()=>{try{let e=await y();h(e)}catch(e){console.error("Error fetching doctors:",e)}})()},[]);let S=()=>{w(null),N(!0)},E=e=>{let t=e.target.files?.[0];t&&P(t)},D=async e=>{if(C){let t=new FormData;t.append("action","add"),t.append("fullname",e.fullname),t.append("prc_license",e.prc_license),t.append("signature",C);try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/save-doctor",{method:"POST",credentials:"include",body:t}),r=await e.json();e.ok?x.Z.fire({icon:"success",title:"Created",text:r.message,showConfirmButton:!1,timer:1e3,willClose:()=>{window.location.reload()}}):x.Z.fire({icon:"error",title:"Error!",text:r.message||"Operation failed",confirmButtonText:"OK"})}catch(e){console.error("Error during add:",e),alert("Failed to connect to the server")}}},z=async e=>{if(""===e.student_id){alert("Student ID is required");return}let t={student_id:e.student_id,document_type:e.doctype,doctor_id:e.doctor};try{let e=await fetch("https://ucpip-backend-production.up.railway.app/api/print-document",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(e.ok){let r=await e.blob(),s=window.URL.createObjectURL(r),n=`generated_${t.student_id}.pdf`,a=document.createElement("a");a.href=s,a.setAttribute("download",n),document.body.appendChild(a),a.click(),a.parentNode?.removeChild(a),x.Z.fire({icon:"success",title:"Success!",text:"PDF downloaded successfully!",timer:3e3,showConfirmButton:!1})}else{let t=await e.text();x.Z.fire({icon:"error",title:"Failed!",text:`Failed to generate the PDF: ${t}`})}}catch(e){console.error("Error details:",e),x.Z.fire({icon:"error",title:"Error",text:"Failed to connect to the server"})}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("section",{className:"bg-gray-300 w-full flex-1 p-4 space-y-4 overflow-y-auto ",children:(0,s.jsxs)("div",{className:"p-4 bg-gray-200 rounded w-full mt-20",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Document Generation"}),(0,s.jsxs)("div",{className:"grid grid-flow-col gap-4 columns-6",children:[s.jsx(o.l0,{..._,children:(0,s.jsxs)("form",{className:"flex flex-col justify-center gap-4 col-span-2",onSubmit:_.handleSubmit(z),children:[s.jsx(o.Wi,{control:_.control,name:"student_id",render:({field:e})=>(0,s.jsxs)(o.xJ,{children:[s.jsx(o.lX,{children:"Student ID"}),s.jsx(o.NI,{children:s.jsx(l.I,{...e,className:"w-full",placeholder:"Student ID"})}),s.jsx(o.zG,{})]})}),s.jsx(o.Wi,{control:_.control,name:"doctype",render:({field:e})=>(0,s.jsxs)(o.xJ,{children:[s.jsx(o.lX,{children:"Document type"}),(0,s.jsxs)(i.Ph,{onValueChange:r=>{e.onChange(r),t(r)},defaultValue:e.value,children:[s.jsx(o.NI,{children:s.jsx(i.i4,{children:s.jsx(i.ki,{placeholder:"Document type"})})}),s.jsx(i.Bw,{children:g.shape.doctype.options.map(e=>s.jsx(i.Ql,{value:e,children:e},e.toLowerCase()))})]}),s.jsx(o.pf,{}),s.jsx(o.zG,{})]})}),(0,s.jsxs)("div",{className:"flex items-center mb-12 space-x-4",children:[s.jsx(o.Wi,{control:_.control,name:"doctor",render:({field:e})=>(0,s.jsxs)(o.xJ,{className:"w-full",children:[s.jsx(o.lX,{children:"Doctor"}),s.jsx(o.NI,{children:(0,s.jsxs)(i.Ph,{value:e.value||"",onValueChange:t=>e.onChange(t),children:[s.jsx(i.i4,{children:s.jsx(i.ki,{placeholder:"Select Department"})}),s.jsx(i.Bw,{children:r?.map(e=>s.jsx(i.Ql,{value:e?.id?.toString()||"",children:e.fullname},e.id))})]})}),s.jsx(o.zG,{})]})}),s.jsx("div",{onClick:()=>S(),children:s.jsx(u.Z,{})})]}),s.jsx(n.z,{type:"submit",children:"Print"})]})}),s.jsx("div",{className:"flex justify-center items-center border border-primary rounded shadow gap-2 col-span-4 h-[512px]",children:e?s.jsx("img",{src:j[e],alt:e,className:"w-[350px] h-auto border rounded"}):(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(p.Z,{size:"1rem"})," Select a document type to preview the template"]})})]})]})}),s.jsx(a.Vq,{open:b,onOpenChange:N,children:(0,s.jsxs)(a.cZ,{children:[(0,s.jsxs)(a.fK,{children:[s.jsx(a.$N,{children:"Doctor"}),s.jsx(a.Be,{children:"Add new"})]}),s.jsx("div",{children:s.jsx(o.l0,{...k,children:(0,s.jsxs)("form",{onSubmit:k.handleSubmit(D),className:"space-y-4 flex flex-col w-full",children:[s.jsx(o.Wi,{control:k.control,name:"fullname",render:({field:e})=>(0,s.jsxs)(o.xJ,{className:"w-full",children:[(0,s.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["Fullname ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(o.NI,{children:s.jsx(l.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Fullname"})}),s.jsx(o.zG,{})]})}),s.jsx(o.Wi,{control:k.control,name:"prc_license",render:({field:e})=>(0,s.jsxs)(o.xJ,{className:"w-full",children:[(0,s.jsxs)(o.lX,{className:"font-bold text-gray-600",children:["PRC License # ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(o.NI,{children:s.jsx(l.I,{...e,className:"w-full mt-2 rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"PRC License #"})}),s.jsx(o.zG,{})]})}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("label",{className:"font-bold text-gray-600",children:["Signature ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>E(e),className:"w-full mt-2"})]}),s.jsx(n.z,{className:"mt-4",type:"submit",children:"Save"})]})})})]})})]})}},34249:(e,t,r)=>{"use strict";r.d(t,{$N:()=>f,Be:()=>x,Vq:()=>i,cZ:()=>p,fK:()=>m,hg:()=>c});var s=r(10439),n=r(21526),a=r(73488),o=r(62077),l=r(76325);let i=a.fC,c=a.xz,d=a.h_;a.x8;let u=n.forwardRef(({className:e,...t},r)=>s.jsx(a.aV,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=a.aV.displayName;let p=n.forwardRef(({className:e,children:t,...r},n)=>(0,s.jsxs)(d,{children:[s.jsx(u,{}),(0,s.jsxs)(a.VY,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(o.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=a.VY.displayName;let m=({className:e,...t})=>s.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let f=n.forwardRef(({className:e,...t},r)=>s.jsx(a.Dx,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));f.displayName=a.Dx.displayName;let x=n.forwardRef(({className:e,...t},r)=>s.jsx(a.dk,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=a.dk.displayName},47435:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var s=r(72117);let n=s.z.object({id:s.z.number().optional(),fullname:s.z.string().nonempty("This is required"),prc_license:s.z.string().nonempty("This is required")})},88645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>s});let s={title:"Documents — UCPI Portal"};function n({children:e}){return e}},79046:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>o});let s=(0,r(49705).createProxy)(String.raw`C:\Users\Alyson\Desktop\ucpip-v1\frontend\src\app\(portal)\documents\page.tsx`),{__esModule:n,$$typeof:a}=s,o=s.default},35280:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var s=r(28465),n=function(e,t,r){if(e&&"reportValidity"in e){var n=(0,s.U2)(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},a=function(e,t){var r=function(r){var s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?n(s.ref,r,e):s.refs&&s.refs.forEach(function(t){return n(t,r,e)})};for(var s in t.fields)r(s)},o=function(e,t){t.shouldUseNativeValidation&&a(e,t);var r={};for(var n in e){var o=(0,s.U2)(t.fields,n),i=Object.assign(e[n]||{},{ref:o&&o.ref});if(l(t.names||Object.keys(e),n)){var c=Object.assign({},(0,s.U2)(r,n));(0,s.t8)(c,"root",i),(0,s.t8)(r,n,c)}else(0,s.t8)(r,n,i)}return r},l=function(e,t){return e.some(function(e){return e.startsWith(t+".")})},i=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,o=n.message,l=n.path.join(".");if(!r[l]){if("unionErrors"in n){var i=n.unionErrors[0].errors[0];r[l]={message:i.message,type:i.code}}else r[l]={message:o,type:a}}if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=r[l].types,d=c&&c[n.code];r[l]=(0,s.KN)(l,t,r,a,d?[].concat(d,n.message):n.message)}e.shift()}return r},c=function(e,t,r){return void 0===r&&(r={}),function(s,n,l){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](s,t)).then(function(e){return l.shouldUseNativeValidation&&a({},l),{errors:{},values:r.raw?s:e}})}catch(e){return o(e)}return i&&i.then?i.then(void 0,o):i}(0,function(e){if(null!=e.errors)return{values:{},errors:o(i(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}))}catch(e){return Promise.reject(e)}}}},52312:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var s=r(21526),n=r(5371),a=r(43655),o=r(77354);function l(e){let t=e+"CollectionProvider",[r,l]=(0,n.b)(t),[i,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=e+"CollectionSlot",u=s.forwardRef((e,t)=>{let{scope:r,children:n}=e,l=c(d,r),i=(0,a.e)(t,l.collectionRef);return s.createElement(o.g7,{ref:i},n)}),p=e+"CollectionItemSlot",m="data-radix-collection-item";return[{Provider:e=>{let{scope:t,children:r}=e,n=s.useRef(null),a=s.useRef(new Map).current;return s.createElement(i,{scope:t,itemMap:a,collectionRef:n},r)},Slot:u,ItemSlot:s.forwardRef((e,t)=>{let{scope:r,children:n,...l}=e,i=s.useRef(null),d=(0,a.e)(t,i),u=c(p,r);return s.useEffect(()=>(u.itemMap.set(i,{ref:i,...l}),()=>void u.itemMap.delete(i))),s.createElement(o.g7,{[m]:"",ref:d},n)})},function(t){let r=c(e+"CollectionConsumer",t);return s.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${m}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},l]}},92390:(e,t,r)=>{"use strict";r.d(t,{gm:()=>a});var s=r(21526);let n=(0,s.createContext)(void 0);function a(e){let t=(0,s.useContext)(n);return e||t||"ltr"}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[675,3195,8036,2336,2352,6367,9403,8889,9786,4004,5143,252,3631,8518],()=>r(87813));module.exports=s})();